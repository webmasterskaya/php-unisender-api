# Создание и отправка сообщений

## `sendEmail`

Метод для отправки одного индивидуального email-сообщения без использования персонализации и с ограниченными возможностями получения статистики. Разумный сценарий использования – персональное уведомление клиента о каком-то индивидуальном событии (например, изменение статуса заказа в интернет-магазине). Для массовых рассылок похожих по содержанию писем предназначена комбинация методов createEmailMessage / createCampaign.

Сообщения, отправляемые через sendEmail, не подвергаются цензуре человеком, поэтому по умолчанию количество разрешаемых к отправке писем через этот метод в сутки ограничено 1000 для новых пользователей (позже при положительных показателях статистики доставки лимит автоматически будет выше), а максимальный размер письма ограничен 1 мегабайтом.

Ограничение по количеству вызовов в минуту - 60. Минимальный интервал между отправкой одному и тому же адресату составляет 60 секунд.

Доступен только один подстановочный код - `{{UnsubscribeUrl}}`.

### Использование

```php
$client->sendEmail(\Webmasterskaya\Unisender\Email $email, int $list_id[, bool $track_read = false, bool $track_links = false, ?string $images_as = null, ?string $cc = null, array $metadata = []]): array
```

### Параметры

- `$email` (\Webmasterskaya\Unisender\Email): Объект письма
- `$list_id` (int): Код списка, от которого будет предложено отписаться адресату в случае, если он перейдёт по ссылке отписки.
- `$track_read` (bool): Отслеживать факт прочтения e-mail сообщения.
- `$track_links` (bool): Отслеживать переходы по ссылкам в e-mail сообщении.
- `$images_as` (string|null): Позволяет изменять режим обработки вложенных изображений в письме. Может иметь значения: attachments - картинки будут сохраняться внутри письма как вложения; only_links - картинки будут на серверах Uniseder, а в письмо будут встроены ссылки на них.
- `$cc` (string|null): Адрес получателя копии письма. Не более 1 адреса. Используется для отладки.
- `$metadata` (array): Метаданные, отправляемые в запросе, возвращаются в Webhooks.

### Возвращаемое значение

Массив

### Исключения

- `\Webmasterskaya\Unisender\Exception\DependencyNotFoundException`
- `\Webmasterskaya\Unisender\Exception\Exception`
- `\Webmasterskaya\Unisender\Exception\UnexpectedValueException`